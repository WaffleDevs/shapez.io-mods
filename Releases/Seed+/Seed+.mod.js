/**!
 * Name: SeedPlus
 * Description: Allows you to view a save's seed, and create saves with custom seeds.
 * Version: 1.0.0
 * Author(s): WaffleDevs
 */
var m=function(e,t,a,n,s,i,o,r,l,h,m,u,g,d,c,p){"use strict";a.createLogger("state/ingame");class M extends d.Mod{init(){let e=0;this.modInterface.replaceMethod(c.MainMenuState,"onPlayButtonClicked",(function(){const t=new s.FormElementInput({id:"delayAmount",placeholder:"",defaultValue:"",validator:e=>Number.parseInt(e)>=0&&Number.parseInt(e)<=2147483647||""==e||"number"==typeof e}),a=new n.DialogWithForm({app:this.app,title:"Seed",desc:"Set the custom seed (0-2147483647) or leave blank for random:",formElements:[t],buttons:["cancel:bad:escape","ok:good:enter"],closeButton:!1});this.dialogs.internalShowDialog(a),a.buttonSignals.ok.add((()=>{e=""!=t.getValue()?Number.parseInt(t.getValue()):i.randomInt(0,2147483647),this.app.savegameMgr.getSavegamesMetaData().length>0&&!this.app.restrictionMgr.getHasUnlimitedSavegames()?this.showSavegameSlotLimit():this.app.adProvider.showVideoAd().then((()=>{const e=this.app.savegameMgr.createNewSavegame();this.moveToState("InGameState",{savegame:e})}))}))})),this.modInterface.replaceMethod(m.GameCore,"initNewGame",(function(){if(this.root.gameIsFresh=!0,this.root.map.seed=e,!this.root.gameMode.hasHub())return;const a=t.gMetaBuildingRegistry.findByClass(r.MetaHubBuilding).createEntity({root:this.root,origin:new o.Vector(-2,-2),rotation:0,originalRotation:0,rotationVariant:0,variant:g.defaultBuildingVariant});this.root.map.placeStaticEntity(a),this.root.entityMgr.registerEntity(a)})),this.modInterface.replaceMethod(u.HUDSettingsMenu,"createElements",(function(e,[t]){this.background=i.makeDiv(t,"ingame_HUD_SettingsMenu",["ingameDialog"]),this.menuElement=i.makeDiv(this.background,null,["menuElement"]),this.root.gameMode.hasHub()&&(this.statsElement=i.makeDiv(this.background,null,["statsElement"],`\n                <strong>${p.T.ingame.settingsMenu.beltsPlaced}</strong><span class="beltsPlaced"></span>\n                <strong>${p.T.ingame.settingsMenu.buildingsPlaced}</strong><span class="buildingsPlaced"></span>\n                <strong>${p.T.ingame.settingsMenu.playtime}</strong><span class="playtime"></span>\n                <strong>Seed:</strong><span class="seedView"></span>\n                `)),this.buttonContainer=i.makeDiv(this.menuElement,null,["buttons"]);const a=[{id:"continue",action:()=>this.close()},{id:"settings",action:()=>this.goToSettings()},{id:"menu",action:()=>this.returnToMenu()}];for(let e=0;e<a.length;++e){const{action:t,id:n}=a[e],s=document.createElement("button");s.classList.add("styledButton"),s.classList.add(n),this.buttonContainer.appendChild(s),this.trackClicks(s,t)}})),this.modInterface.replaceMethod(u.HUDSettingsMenu,"show",(function(){this.visible=!0,this.root.app.inputMgr.makeSureAttachedAndOnTop(this.inputReciever);const e=Math.ceil(this.root.time.now()/60);if(this.root.gameMode.hasHub()){const t=this.statsElement.querySelector(".playtime"),a=this.statsElement.querySelector(".buildingsPlaced"),n=this.statsElement.querySelector(".beltsPlaced"),s=this.statsElement.querySelector(".seedView");t.innerText=p.T.global.time.xMinutes.replace("<x>",`${e}`),s.innerText=i.formatBigNumberFull(this.root.map.seed),a.innerText=i.formatBigNumberFull(this.root.entityMgr.getAllWithComponent(h.StaticMapEntityComponent).length-this.root.entityMgr.getAllWithComponent(l.BeltComponent).length),n.innerText=i.formatBigNumberFull(this.root.entityMgr.getAllWithComponent(l.BeltComponent).length)}}))}}return e.default=M,e.m={name:"SeedPlus",description:"Allows you to view a save's seed, and create saves with custom seeds.",version:"1.0.0",settings:{savedEntities:{}},extra:{updateURL:"https://skimnerphi.net/api/v1/latest/WhoCares",authors:[{name:"WaffleDevs",email:"",icon:"https://avatars.githubusercontent.com/u/77215539?s=64"}]},id:"Seed+",author:"WaffleDevs",doesNotAffectSavegame:!0},e}({},shapez,shapez,shapez,shapez,shapez,shapez,shapez,shapez,shapez,shapez,shapez,shapez,shapez,shapez,shapez);$shapez_registerMod(m.default,m.m);
